QEMU command line arguments:
-machine sbsa-ref
-m 4096
-smp 2
-cpu cortex-a57
-drive if=pflash,file=firmware/SBSA_FLASH0.fd,format=raw
-drive if=pflash,file=firmware/SBSA_FLASH1.fd,format=raw
-drive file=fat:rw:/home/marcin/devel/linaro/sbsa-qemu/sbsa-ref-status/disks/virtual/,format=raw
-usb
-device usb-kbd
-device usb-tablet
-nographic
-watchdog-action none
-no-reboot
-monitor telnet::45454,server,nowait
-serial stdio
-device pcie-root-port,id=root_port_for_switch1,chassis=1,slot=12
-device x3130-upstream,id=upstream_port1,bus=root_port_for_switch1
-device xio3130-downstream,id=downstream_port1,bus=upstream_port1,chassis=1,slot=20
-device ac97,bus=downstream_port1
-device pcie-root-port,id=root_port_for_nvme1,chassis=1,slot=1
-device nvme,serial=deadbeef,bus=root_port_for_nvme1
-device pcie-root-port,id=root_port_for_igb,chassis=1,slot=2
-device igb,bus=root_port_for_igb
-device pcie-root-port,id=root_port_for_xhci,chassis=1,slot=3
-device qemu-xhci,bus=root_port_for_xhci
-device pcie-root-port,id=root_port_for_ac97,chassis=1,slot=97
-device ac97,bus=root_port_for_ac97
-device pcie-root-port,id=root_port_for_pci,chassis=1
-device pcie-pci-bridge,id=pci,bus=root_port_for_pci
-device virtio-rng-pci,bus=pci,addr=8

EFI startup script:
mode 100 31
pci
fs0:sbsa.efi -skip 861 -l 3
reset -c

NOTICE:  Booting Trusted Firmware
NOTICE:  BL1: v2.10.0(debug):hrw-2024-03-21-1756-36-g602f9ec79-dirty
NOTICE:  BL1: Built : 11:38:19, Mar 25 2024
INFO:    BL1: RAM 0x3ffee000 - 0x3fffb000
INFO:    BL1: cortex_a57: CPU workaround for erratum 1 was applied
WARNING: BL1: cortex_a57: CPU workaround for erratum 826974 was missing!
WARNING: BL1: cortex_a57: CPU workaround for erratum 826977 was missing!
WARNING: BL1: cortex_a57: CPU workaround for erratum 828024 was missing!
WARNING: BL1: cortex_a57: CPU workaround for erratum 829520 was missing!
WARNING: BL1: cortex_a57: CPU workaround for erratum 833471 was missing!
WARNING: BL1: cortex_a57: CPU workaround for erratum 859972 was missing!
WARNING: BL1: cortex_a57: CPU workaround for erratum 1319537 was missing!
INFO:    BL1: cortex_a57: CPU workaround for CVE 2017_5715 was applied
INFO:    BL1: cortex_a57: CPU workaround for CVE 2018_3639 was applied
INFO:    BL1: cortex_a57: CPU workaround for CVE 2022_23960 was applied
INFO:    BL1: Loading BL2
INFO:    Loading image id=1 at address 0x3fcd1000
INFO:    Image id=1 loaded: 0x3fcd1000 - 0x3fcd9201
NOTICE:  BL1: Booting BL2
INFO:    Entry point address = 0x3fcd1000
INFO:    SPSR = 0x3c5
NOTICE:  BL2: v2.10.0(debug):hrw-2024-03-21-1756-36-g602f9ec79-dirty
NOTICE:  BL2: Built : 11:38:19, Mar 25 2024
INFO:    BL2: Doing platform setup
INFO:    BL2: Loading image id 3
INFO:    Loading image id=3 at address 0x3fcee000
INFO:    Image id=3 loaded: 0x3fcee000 - 0x3fcff0f1
INFO:    BL2: Skip loading image id 5
NOTICE:  BL1: Booting BL31
INFO:    Entry point address = 0x3fcee000
INFO:    SPSR = 0x3cd
INFO:    Platform version: 0.3
INFO:    GICD base = 0x40060000
INFO:    GICR base = 0x40080000
INFO:    GICI base = 0x44081000
INFO:    CPU 0: node-id: 0, mpidr: 0
INFO:    CPU 1: node-id: 0, mpidr: 1
INFO:    Found 2 cpus
INFO:    There is no thread in this cpu-map
INFO:    There is no thread in this cpu-map
INFO:    cpu topology:sockets is 1, clusters is 1, cores is 2, thread is 0
INFO:    RAM 0: node-id: 0, address: 0x10000000000 - 0x100ffffffff
NOTICE:  BL31: v2.10.0(debug):hrw-2024-03-21-1756-36-g602f9ec79-dirty
NOTICE:  BL31: Built : 11:38:19, Mar 25 2024
INFO:    GICv3 without legacy support detected.
INFO:    ARM GICv3 driver initialized in EL3
INFO:    Maximum SPI INTID supported: 287
INFO:    BL31: Initializing runtime services
INFO:    BL31: cortex_a57: CPU workaround for erratum 1 was applied
WARNING: BL31: cortex_a57: CPU workaround for erratum 826974 was missing!
WARNING: BL31: cortex_a57: CPU workaround for erratum 826977 was missing!
WARNING: BL31: cortex_a57: CPU workaround for erratum 828024 was missing!
WARNING: BL31: cortex_a57: CPU workaround for erratum 829520 was missing!
WARNING: BL31: cortex_a57: CPU workaround for erratum 833471 was missing!
WARNING: BL31: cortex_a57: CPU workaround for erratum 859972 was missing!
WARNING: BL31: cortex_a57: CPU workaround for erratum 1319537 was missing!
INFO:    BL31: cortex_a57: CPU workaround for CVE 2017_5715 was applied
INFO:    BL31: cortex_a57: CPU workaround for CVE 2018_3639 was applied
INFO:    BL31: cortex_a57: CPU workaround for CVE 2022_23960 was applied
INFO:    BL31: Preparing for EL3 exit to normal world
INFO:    Entry point address = 0x10000000
INFO:    SPSR = 0x3c9
UEFI firmware (version 1.0 built at 14:00:09 on Mar 20 2024)
INFO:    SMC call: (0xc200012c) (function id: 300)
INFO:    SMC call: (0xc200012d) (function id: 301)
INFO:    SMC call: (0xc200012c) (function id: 300)
INFO:    SMC call: (0xc200012d) (function id: 301)
INFO:    SMC call: (0xc2000001) (function id: 1)
INFO:    Platform version requested
INFO:    SMC call: (0xc2000064) (function id: 100)
INFO:    SMC call: (0xc2000065) (function id: 101)
INFO:    SMC call: (0xc20000c8) (function id: 200)
INFO:    SMC call: (0xc20000c9) (function id: 201)
INFO:    SMC call: (0xc20000c9) (function id: 201)
INFO:    SMC call: (0xc20000c8) (function id: 200)
INFO:    SMC call: (0xc20000c8) (function id: 200)
INFO:    SMC call: (0xc20000c8) (function id: 200)
INFO:    SMC call: (0xc20000c8) (function id: 200)
INFO:    SMC call: (0xc20000c8) (function id: 200)
INFO:    SMC call: (0xc20000c8) (function id: 200)
INFO:    SMC call: (0xc20000c8) (function id: 200)
INFO:    SMC call: (0xc20000c8) (function id: 200)
INFO:    SMC call: (0xc20000c8) (function id: 200)
[2J[04D[=3h[2J[09D[2J[04DUEFI Interactive Shell v2.2
EDK II
UEFI v2.70 (EFI Development Kit II / SbsaQemu, 0x00010000)
[1m[33m[40mMapping table[0m[37m[40m
[1m[33m[40m      FS0:[0m[37m[40m [1m[37m[40mAlias(s):[0m[37m[40mHD0a65535a1:;BLK1:
          VenHw(0D51905B-B77E-452A-A2C0-ECA0CC8D514A,000010600000000000)/Sata(0x
0,0xFFFF,0x0)/HD(1,MBR,0xBE1AFDFA,0x3F,0xFBFC1)
[1m[33m[40m     BLK0:[0m[37m[40m [1m[37m[40mAlias(s):[0m[37m[40m
          VenHw(0D51905B-B77E-452A-A2C0-ECA0CC8D514A,000010600000000000)/Sata(0x
0,0xFFFF,0x0)
Press [1m[37m[40mESC[0m[37m[40m in 5 seconds to skip [1m[33m[40mstartup.nsh[0m[37m[40m or any other key to continue.[72DPress [1m[37m[40mESC[0m[37m[40m in 4 seconds to skip [1m[33m[40mstartup.nsh[0m[37m[40m or any other key to continue.[72DPress [1m[37m[40mESC[0m[37m[40m in 3 seconds to skip [1m[33m[40mstartup.nsh[0m[37m[40m or any other key to continue.[72DPress [1m[37m[40mESC[0m[37m[40m in 2 seconds to skip [1m[33m[40mstartup.nsh[0m[37m[40m or any other key to continue.[72DPress [1m[37m[40mESC[0m[37m[40m in 1 seconds to skip [1m[33m[40mstartup.nsh[0m[37m[40m or any other key to continue.
[1m[33m[40mShell> [0m[37m[40mmode 100 31
[2J[01;01H[=3h[2J[09D[2J[04D[1m[33m[40mShell> [0m[37m[40mpci
   Seg  Bus  Dev  Func
   ---  ---  ---  ----
    [1m[33m[40m00   00   00    00 ==> [0m[37m[40mBridge Device - Host/PCI bridge
             Vendor 1B36 Device 0008 Prog Interface 0
    [1m[33m[40m00   00   01    00 ==> [0m[37m[40mNetwork Controller - Ethernet controller
             Vendor 8086 Device 10D3 Prog Interface 0
    [1m[33m[40m00   00   02    00 ==> [0m[37m[40mDisplay Controller - Other display controller
             Vendor 1234 Device 1111 Prog Interface 0
    [1m[33m[40m00   00   03    00 ==> [0m[37m[40mBridge Device - PCI/PCI bridge
             Vendor 1B36 Device 000C Prog Interface 0
    [1m[33m[40m00   00   04    00 ==> [0m[37m[40mBridge Device - PCI/PCI bridge
             Vendor 1B36 Device 000C Prog Interface 0
    [1m[33m[40m00   00   05    00 ==> [0m[37m[40mBridge Device - PCI/PCI bridge
             Vendor 1B36 Device 000C Prog Interface 0
    [1m[33m[40m00   00   06    00 ==> [0m[37m[40mBridge Device - PCI/PCI bridge
             Vendor 1B36 Device 000C Prog Interface 0
    [1m[33m[40m00   00   07    00 ==> [0m[37m[40mBridge Device - PCI/PCI bridge
             Vendor 1B36 Device 000C Prog Interface 0
    [1m[33m[40m00   00   08    00 ==> [0m[37m[40mBridge Device - PCI/PCI bridge
             Vendor 1B36 Device 000C Prog Interface 0
    [1m[33m[40m00   01   00    00 ==> [0m[37m[40mBridge Device - PCI/PCI bridge
             Vendor 104C Device 8232 Prog Interface 0
    [1m[33m[40m00   02   00    00 ==> [0m[37m[40mBridge Device - PCI/PCI bridge
             Vendor 104C Device 8233 Prog Interface 0
    [1m[33m[40m00   03   00    00 ==> [0m[37m[40mMultimedia Device - Audio device
             Vendor 8086 Device 2415 Prog Interface 0
    [1m[33m[40m00   04   00    00 ==> [0m[37m[40mMass Storage Controller - Non-volatile memory subsystem
             Vendor 1B36 Device 0010 Prog Interface 2
    [1m[33m[40m00   05   00    00 ==> [0m[37m[40mNetwork Controller - Ethernet controller
             Vendor 8086 Device 10C9 Prog Interface 0
    [1m[33m[40m00   06   00    00 ==> [0m[37m[40mSerial Bus Controllers - USB
             Vendor 1B36 Device 000D Prog Interface 30
    [1m[33m[40m00   07   00    00 ==> [0m[37m[40mMultimedia Device - Audio device
             Vendor 8086 Device 2415 Prog Interface 0
    [1m[33m[40m00   08   00    00 ==> [0m[37m[40mBridge Device - PCI/PCI bridge
             Vendor 1B36 Device 000E Prog Interface 0
    [1m[33m[40m00   09   08    00 ==> [0m[37m[40mPre 2.0 device - UNDEFINED
             Vendor 1AF4 Device 1005 Prog Interface 0
[1m[33m[40mShell> [0m[37m[40mfs0:sbsa.efi -skip 861 -l 3


 SBSA Architecture Compliance Suite
    Version 7.1.4

 Starting tests for level  3 (Print level is  3)

 Creating Platform Information Tables
 PE_INFO: Number of PE detected       :    2
 GIC_INFO: Number of GICD             :    1
 GIC_INFO: Number of ITS              :    1
 TIMER_INFO: Number of system timers  :    0
 WATCHDOG_INFO: Number of Watchdogs   :    1
 CACHE_INFO: Number of cache nodes    :    5
 MPAM INFO: Number of MSC nodes       :    0
 RAS2_INFO: Number of RAS2 entries    :    0
 RAS2_INFO: Num of RAS2 memory entries:    0
 PCIE_INFO: Number of ECAM regions    :    1
 PCIE_INFO: Number of BDFs found      :   14
 PCIE_INFO: Number of RCiEP           :    2
 PCIE_INFO: Number of RCEC            :    0
 PCIE_INFO: Number of EP              :    3
 PCIE_INFO: Number of RP              :    6
 PCIE_INFO: Number of iEP_EP          :    0
 PCIE_INFO: Number of iEP_RP          :    0
 PCIE_INFO: Number of UP of switch    :    1
 PCIE_INFO: Number of DP of switch    :    1
 PCIE_INFO: Number of PCI/PCIe Bridge :    0
 PCIE_INFO: Number of PCIe/PCI Bridge :    1
 SMMU_INFO: Number of SMMU CTRL       :    1
 Peripheral: Num of USB controllers   :    1
 Peripheral: Num of SATA controllers  :    1
 Peripheral: Num of UART controllers  :    1
 PMU_INFO: Number of PMU units        :    0
 RAS_INFO: Number of RAS nodes        :    0

      *** Starting PE tests ***
   1 : Check PE Granule Support          : Result:  PASS
   2 : Check for 16-bit ASID support     : Result:  PASS
   3 : Check AARCH64 implementation      : Result:  PASS
   4 : Check FEAT_LPA Requirements       
       S_L3PE_04
       Checkpoint --  1                  : Result:  SKIPPED

      One or more PE tests failed or were skipped.

      *** Starting Memory tests ***
 101 : Check peripherals addr 64Kb apart : Result:  PASS

      All Memory tests passed.

      *** Starting GIC tests ***
 201 : Check GIC version                 : Result:  PASS

      All GIC tests passed.

      *** Starting PCIe tests ***

      All PCIe tests passed.
      PCIE_INFO: Number of exerciser cards :    0

     No Exerciser Devices Found, Skipping Exerciser tests...

     -------------------------------------------------------
     Total Tests run  =    6;  Tests Passed  =    5  Tests Failed =    0
     ---------------------------------------------------------

      **  For complete SBSA test coverage, it is 
            necessary to also run the BSA test    **


      *** SBSA tests complete. Reset the system. ***

[1m[33m[40mShell> [0m[37m[40mreset -c
INFO:    PSCI Power Domain Map:
